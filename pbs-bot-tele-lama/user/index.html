<!DOCTYPE html>
<html lang="id" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Putra Btt Store - Price List</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --primary-color:#6366f1;--secondary-color:#8b5cf6;--accent-color:#06b6d4;--success-color:#10b981;--warning-color:#f59e0b;--danger-color:#ef4444;
      --dark-color:#0f172a;--light-color:#f8fafc;--muted-color:#64748b;--bg-page:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      --bg-surface:#ffffff;--text-main:#0f172a;
      --card-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);
      --card-shadow-hover:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);
      --border-radius:16px;--gradient-primary:linear-gradient(135deg,var(--primary-color) 0%,var(--secondary-color) 100%);
      --gradient-accent:linear-gradient(135deg,var(--accent-color) 0%,var(--success-color) 100%);
      /* dinamis (diisi via JS) */
      --nav-h:64px;
    }
    html[data-theme="dark"]{
      --bg-page:linear-gradient(135deg,#0b1220 0%,#141a2b 100%);
      --bg-surface:#0f172a;--text-main:#e5e7eb;--light-color:#0b1020;--muted-color:#9aa4b2;
      --card-shadow:0 1px 2px rgba(0,0,0,.6);--card-shadow-hover:0 10px 20px rgba(0,0,0,.6);
    }
    *{box-sizing:border-box}
    body{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;background:var(--bg-page);min-height:100vh;line-height:1.6;color:var(--text-main)}
    .container-fluid{background:var(--bg-surface);min-height:100vh;margin:0;padding:0}

    /* ===== Glass Navbar ===== */
    .nav-glass{
      position:sticky; top:0; z-index:1100;
      background:rgba(255,255,255,.65);
      backdrop-filter:saturate(1.2) blur(10px);
      border-bottom:1px solid #e2e8f0;
    }
    html[data-theme="dark"] .nav-glass{
      background:rgba(15,23,42,.7);
      border-color:#1f2a44;
    }
    .navbar-brand{
      font-weight:900; letter-spacing:.2px;
      background:var(--gradient-primary); -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .nav-link{font-weight:700; border-radius:999px; padding:.45rem .9rem !important;}
    .nav-link:hover{ background:rgba(99,102,241,.1); }
    html[data-theme="dark"] .nav-link:hover{ background:rgba(99,102,241,.15); }
    .nav-link.active{ color:#fff !important; background:var(--gradient-primary); }
    .navbar-toggler{
      border-radius:12px;
      border:1px solid #cbd5e1;
      padding:.25rem .4rem;
      color:inherit;
      background:transparent;
    }
    .navbar-toggler:focus{ box-shadow:none; }

    .nav-icon-btn{
      width:42px; height:42px; display:inline-flex; align-items:center; justify-content:center;
      border-radius:12px; border:2px solid #e2e8f0; background:#fff; color:#0f172a;
    }
    html[data-theme="dark"] .nav-icon-btn{ background:#0b1220; border-color:#1f2a44; color:#e5e7eb; }
    .nav-cart-count{
      position:absolute; top:-6px; right:-6px; min-width:20px; height:20px; border-radius:999px;
      background:#10b981; color:#fff; font-size:.75rem; font-weight:900; display:flex; align-items:center; justify-content:center;
    }

    /* === FIX: warna teks navigasi & ikon di DARK MODE === */
    html[data-theme="dark"] .nav-glass .navbar-nav .nav-link{
      color:#e5e7eb !important;
    }
    html[data-theme="dark"] .nav-glass .navbar-nav .nav-link:hover{
      color:#ffffff !important;
      background:rgba(99,102,241,.18);
    }
    html[data-theme="dark"] .nav-glass .navbar-nav .nav-link.active{
      color:#ffffff !important;
      background:var(--gradient-primary);
    }
    html[data-theme="dark"] .nav-glass .navbar-brand{
      color:#e5e7eb;
    }
    .navbar-toggler{
      border:1px solid #cbd5e1;
      background:rgba(255,255,255,0.1);
      border-radius:12px;
      padding:4px 6px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    html[data-theme="dark"] .navbar-toggler{
      border-color:#4b5563;
      background:rgba(255,255,255,0.15);
    }

    .navbar-toggler:focus{
      box-shadow:none !important;
    }

    .navbar-toggler-icon{
      width:1.8rem;
      height:1.8rem;
      background-repeat:no-repeat;
      background-position:center;
      background-size:100%;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='%23ffffff' stroke-width='2' stroke-linecap='round' d='M4 6h16M4 12h16M4 18h16'/%3E%3C/svg%3E");
    }

    /* Di light mode garisnya jadi hitam */
    html[data-theme='light'] .navbar-toggler-icon{
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath stroke='%230f172a' stroke-width='2' stroke-linecap='round' d='M4 6h16M4 12h16M4 18h16'/%3E%3C/svg%3E");
    }

    html[data-theme="dark"] .offcanvas,
    html[data-theme="dark"] .dropdown-menu{
      background:#0b1220;
      color:#e5e7eb;
      border-color:#1f2a44;
    }
    html[data-theme="dark"] .dropdown-item{
      color:#e5e7eb;
    }
    html[data-theme="dark"] .dropdown-item:hover{
      color:#fff;
      background:rgba(99,102,241,.18);
    }

    .topbar{
      position:sticky; top:var(--nav-h); z-index:1000;
      background:#fff0; border-bottom:1px solid #e2e8f0;
      backdrop-filter:saturate(1.1) blur(6px);
    }
    html[data-theme="dark"] .topbar{ background:#0f172acc; border-color:#1f2a44 }

    .search-section{padding:1rem 0}
    .search-input,.sort-select{
      border:2px solid #e2e8f0;border-radius:12px;padding:.75rem 1rem;font-size:1rem;transition:.3s;background:#fff;color:#0f172a;
    }
    html[data-theme="dark"] .search-input,html[data-theme="dark"] .sort-select{
      background:#0b1220;border-color:#1f2a44;color:#e5e7eb
    }
    .input-group-custom{position:relative}
    .input-icon{position:absolute;left:1rem;top:50%;transform:translateY(-50%);color:#64748b;z-index:10}
    .search-input{padding-left:3rem}
    main{scroll-margin-top:calc(var(--nav-h) + 16px);}


    html[data-theme="dark"] .cat-chip{background:#0b1220;border-color:#1f2a44;color:#e5e7eb}
    html[data-theme="dark"] .cat-chip.active{background:var(--gradient-primary);color:#fff;border-color:transparent}

    .products-section{padding:2rem 0 1.5rem;background:var(--light-color)}
    html[data-theme="dark"] .products-section{background:#0b1020}
    .section-title{font-size:2rem;font-weight:700;color:var(--text-main);margin-bottom:.25rem;text-align:center}
    .section-subtitle{color:var(--muted-color);font-size:1rem;text-align:center;margin-bottom:1.25rem}

    .product-card{background:var(--bg-surface);border-radius:var(--border-radius);box-shadow:var(--card-shadow);transition:all .4s cubic-bezier(.25,.8,.25,1);border:1px solid #f1f5f9;overflow:hidden;height:100%;position:relative;display:flex;flex-direction:column;cursor:pointer}
    html[data-theme="dark"] .product-card{border-color:#1f2a44}
    .product-card:hover{transform:translateY(-8px);box-shadow:var(--card-shadow-hover);border-color:#c7d2fe}
    .product-card::before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-primary);transform:scaleX(0);transition:transform .3s}
    .product-card:hover::before{transform:scaleX(1)}

    a.quick-wa { text-decoration: none !important; color: inherit; }
    a.quick-wa:hover, a.quick-wa:focus { text-decoration: none !important; }

    .product-icon{
      width:80px;height:80px;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,rgba(99,102,241,0.08),rgba(45,212,191,0.08));border-radius:18px;transition:.3s;border:2px solid #e2e8f0;
    }
    html[data-theme="dark"] .product-icon{background:linear-gradient(135deg,rgba(99,102,241,0.15),rgba(45,212,191,0.15));border-color:#334155}
    .product-card:hover .product-icon{background:var(--gradient-primary);transform:scale(1.1);border-color:transparent;box-shadow:0 8px 20px rgba(99,102,241,0.3)}
    .product-icon img{width:50px;height:50px;object-fit:contain;filter:none;transition:filter .3s}
    .product-card:hover .product-icon img{filter:brightness(0) invert(1)}

    .product-title{font-size:1.05rem;font-weight:700;color:var(--text-main);margin-bottom:.5rem;line-height:1.35;min-height:2.6em}
    .price-wrap{margin-bottom:0.8rem;display:flex;flex-direction:column;gap:0.25rem}
    .price{font-size:1.2rem;font-weight:800;background:var(--gradient-primary);-webkit-background-clip:text;background-clip:text;color:transparent;margin-right:.5rem}
    .price-old{font-size:.9rem;color:#94a3b8;text-decoration:line-through}
    html[data-theme="dark"] .price-old{color:#7b8794}

    .category-badge{position:absolute;top:1rem;right:1rem;background:var(--gradient-primary);color:#fff;padding:.35rem .7rem;border-radius:8px;font-size:.75rem;font-weight:800;display:inline-flex;align-items:center;gap:.35rem;box-shadow:0 4px 12px rgba(99,102,241,0.3)}
    .badge-stock{position:absolute;bottom:1rem;right:1rem;border-radius:8px;padding:.15rem .5rem;font-size:.75rem}

    .product-actions{gap:.5rem;justify-content:center;width:100%;margin-top:auto}
    .icon-btn{
      width:42px;height:42px;display:inline-flex;align-items:center;justify-content:center;border-radius:12px;
      border:2px solid #e2e8f0;background:#f8fafc;transition:.2s;
    }
    .icon-btn i{font-size:1.05rem}
    .icon-btn:disabled{opacity:.6;cursor:not-allowed}
    .icon-btn:hover{transform:translateY(-1px)}
    /* Tonjolkan detail button */
    .btn-detail{
      background:var(--gradient-primary) !important;color:#fff !important;border-color:transparent !important;width:100% !important;padding:0.7rem 1.2rem !important;font-weight:700 !important;font-size:0.95rem !important;height:auto !important;box-shadow:0 4px 12px rgba(99,102,241,0.4) !important;border-radius:10px !important;
    }
    .btn-detail:hover{
      transform:translateY(-3px) !important;box-shadow:0 8px 20px rgba(99,102,241,0.6) !important;
    }
    .btn-detail:disabled{
      opacity:0.5 !important;box-shadow:none !important;
    }
    html[data-theme="dark"] .btn-detail{
      background:var(--gradient-primary) !important;color:#fff !important;
    }
    html[data-theme="dark"] .icon-btn{background:#0b1220;border-color:#1f2a44;color:#e5e7eb}

    .btn-add.icon-btn{border-color:#c7d2fe;background:#eef2ff;color:#3730a3}
    html[data-theme="dark"] .btn-add.icon-btn{background:#1e293b;border-color:#334155;color:#c7d2fe}
    .quick-wa.icon-btn{border-color:#22c55e;background:#ecfdf5}
    .quick-wa.icon-btn i{color:#16a34a}
    html[data-theme="dark"] .quick-wa.icon-btn{background:#052e1d;border-color:#14532d}

    .wishlist-btn{position:absolute;top:.6rem;left:.6rem;background:#ffffffcc;border:1px solid #e2e8f0;border-radius:50%;width:38px;height:38px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:2}
    html[data-theme="dark"] .wishlist-btn{background:#0b1220cc;border-color:#1f2a44}
    .wishlist-btn i{color:#94a3b8}
    .wishlist-btn.active i{color:#ef4444}

    .modal-content{border-radius:var(--border-radius);border:none;box-shadow:0 25px 50px -12px rgba(0,0,0,.25); background:var(--bg-surface); color:var(--text-main);}
    .modal-header{background:var(--gradient-primary);color:#fff;border-radius:var(--border-radius) var(--border-radius) 0 0;padding:1.1rem}
    .btn-close{filter:brightness(0) invert(1)}
    .modal-body{padding:1rem; color:var(--text-main);max-height:60vh;overflow-y:auto;}
    .modal-footer{padding:1rem;border-top:1px solid #f1f5f9}
    html[data-theme="dark"] .modal-footer{border-color:#1f2a44}
    /* Tonjolkan tombol Pesan di modal */
    #modalPesanBtn{
      background:linear-gradient(135deg,#16a34a,#22c55e) !important;border-color:transparent !important;font-weight:700 !important;box-shadow:0 4px 12px rgba(22,163,74,0.4) !important;padding:0.65rem 1.5rem !important;font-size:1rem !important;
    }
    #modalPesanBtn:hover{
      transform:translateY(-2px) !important;box-shadow:0 6px 20px rgba(22,163,74,0.6) !important;background:linear-gradient(135deg,#15803d,#16a34a) !important;
    }

    /* ======== Modal Detail Produk (premium look) ======== */

    .modal-product-main{
      border-radius:18px;
      padding:.65rem .75rem;
      background:linear-gradient(135deg,rgba(129,140,248,.08),rgba(45,212,191,.08));
    }
    html[data-theme="dark"] .modal-product-main{
      background:linear-gradient(135deg,rgba(79,70,229,.18),rgba(45,212,191,.15));
    }

    .modal-product-icon{
      width:80px;height:80px;
    }

    .modal-category-pill{
      background:linear-gradient(135deg,#4f46e5,#6366f1);
      color:#fff;
      border-radius:999px;
      padding:.2rem .65rem;
      font-size:.75rem;
      font-weight:600;
      box-shadow:0 8px 20px rgba(79,70,229,.6);
    }

    .modal-product-title{
      font-weight:800;
      font-size:1.05rem;
    }
    .modal-product-subtitle{
      font-size:.9rem;
      color:var(--muted-color);
    }
    html[data-theme="dark"] .modal-product-subtitle{
      color:#9ca3af;
    }

    .modal-product-prices .modal-price-main{
      font-size:1.1rem;
      font-weight:800;
      color:var(--success-color);
    }
    .modal-product-prices .modal-price-old{
      font-size:.9rem;
      text-decoration:line-through;
      color:#9ca3af;
    }
    html[data-theme="dark"] .modal-product-prices .modal-price-old{
      color:#6b7280;
    }

    .modal-variant-list{
      margin-top:.35rem;
    }
    .variant-card{
      border-radius:14px;
      padding:.7rem .8rem;
      border:1px solid #e5e7eb;
      background:#f9fafb;
    }
    .variant-card:hover{
      border-color:#a5b4fc;
      box-shadow:0 8px 22px rgba(148,163,184,.45);
    }
    html[data-theme="dark"] .variant-card{
      background:#020617;
      border-color:#1f2937;
    }
    html[data-theme="dark"] .variant-card:hover{
      border-color:#4f46e5;
      box-shadow:0 18px 40px rgba(0,0,0,.95);
    }

    .variant-card-title{
      font-size:.95rem;
    }
    .variant-card-label{
      font-size:.78rem;
    }

    .variant-card-price{
      font-size:.95rem;
      color:var(--success-color);
    }
    .variant-card-price-old{
      font-size:.78rem;
      text-decoration:line-through;
      color:#9ca3af;
    }

    .variant-features{
      margin:0 0 .4rem 0;
      padding:0;
    }
    .variant-feature-item{
      display:flex;
      align-items:flex-start;
      gap:.35rem;
      font-size:.85rem;
      margin-bottom:.15rem;
    }
    .variant-feature-icon{
      margin-top:.10rem;
      font-size:.8rem;
      color:#22c55e;
    }
    /* Styling untuk tombol di variant card */
    .variant-card .btn{
      font-weight:700 !important;
      padding:0.6rem 1rem !important;
      font-size:0.9rem !important;
      border-radius:10px !important;
      transition:all 0.3s ease !important;
      box-shadow:0 2px 8px rgba(0,0,0,0.1) !important;
      flex:1;
    }
    .variant-card .btn-outline-primary{
      border-width:2px !important;
      border-color:#6366f1 !important;
      color:#6366f1 !important;
      background:transparent !important;
    }
    .variant-card .btn-outline-primary:hover:not(:disabled){
      background:#6366f1 !important;
      color:#fff !important;
      transform:translateY(-2px) !important;
      box-shadow:0 4px 14px rgba(99,102,241,0.5) !important;
    }
    .variant-card .btn-success{
      background:linear-gradient(135deg,#16a34a,#22c55e) !important;
      border-color:transparent !important;
      color:#fff !important;
    }
    .variant-card .btn-success:hover:not(:disabled){
      background:linear-gradient(135deg,#15803d,#16a34a) !important;
      transform:translateY(-2px) !important;
      box-shadow:0 4px 14px rgba(22,163,74,0.6) !important;
    }
    .variant-card .btn:disabled{
      opacity:0.5 !important;
      cursor:not-allowed !important;
      transform:none !important;
    }

    html[data-theme="dark"] .modal-body .text-muted,
    html[data-theme="dark"] .modal-body .small{
      color:#9ca3af !important;
    }

    html[data-theme="dark"] #produkModal .btn-success{
      background-color:#16a34a;
      border-color:#16a34a;
    }
    html[data-theme="dark"] #produkModal .btn-success:hover{
      background-color:#15803d;
      border-color:#15803d;
    }

    html[data-theme="dark"] #produkModal .btn-outline-primary{
      color:#bfdbfe;
      border-color:#60a5fa;
    }
    html[data-theme="dark"] #produkModal .btn-outline-primary:hover{
      background-color:#1d4ed8;
      border-color:#1d4ed8;
      color:#eff6ff;
    }

    .fade-in{animation:fadeIn .6s ease-out forwards}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
    .empty-state{text-align:center;padding:3rem;color:var(--muted-color)}
    .empty-state i{font-size:3rem;margin-bottom:1rem;opacity:.5}
    .loading{display:flex;justify-content:center;align-items:center;height:200px}
    .spinner{width:40px;height:40px;border:4px solid #f1f5f9;border-top:4px solid var(--primary-color);border-radius:50%;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .btn:focus,.form-control:focus,.form-select:focus{outline:2px solid var(--primary-color);outline-offset:2px;box-shadow:none}

    .modal{ z-index:1200; }
    .modal-dialog{ margin:0.75rem auto; }
    /* Modal lebih tinggi untuk langsung tampil varian */
    .modal-dialog.modal-lg{
      max-width:600px;margin:1rem auto;
    }
    @media(min-width:992px){
      .modal-dialog.modal-lg{
        max-width:850px;height:92vh;
      }
      .modal-dialog.modal-lg .modal-body{
        max-height:78vh !important;
      }
    }
    @media(max-width:991px){
      .modal-dialog.modal-lg{
        max-width:100%;margin:0.25rem;
        height:95vh;
      }
      .modal-dialog.modal-lg .modal-body{
        max-height:calc(95vh - 140px) !important;
      }
    }
    /* Sembunyikan modal footer */
    #produkModal .modal-footer{
      display:none !important;
    }

    .offcanvas{ z-index:1200; }
    .offcanvas{ margin:0.75rem auto; }

    @supports (padding: max(0px)) {
      .modal{
        padding-top: max(env(safe-area-inset-top, 0px), calc(var(--nav-h) + 10px));
        padding-left: max(8px, env(safe-area-inset-left, 0px));
        padding-right: max(8px, env(safe-area-inset-right, 0px));
        padding-bottom: max(8px, env(safe-area-inset-bottom, 0px));
      }
    }

    @media (max-width: 576px){
      .modal-dialog{ margin:0; }
      .modal-content{ border-radius:16px; }
      .modal-header{
        position: sticky;
        top: 0;
        z-index: 1;
        background: var(--gradient-primary);
        color:#fff;
      }
      .btn-close{ filter:brightness(0) invert(1); }
    }

    @media (max-width:576px){#produk-list .col-6{flex:0 0 50%;max-width:50%}}

    .floating-cart{
      position:fixed;right:16px;bottom:16px;z-index:900;background:var(--gradient-primary);border:none;color:#fff;border-radius:999px;
      padding:.9rem 1.1rem;box-shadow:0 8px 24px rgba(0,0,0,.25);display:flex;align-items:center;gap:.6rem;font-weight:900
    }
    .floating-cart .count{background:#fff;color:#1f2937;font-weight:900;padding:.1rem .5rem;border-radius:999px;min-width:28px;text-align:center}

    .floating-dark{
      position:fixed;left:16px;bottom:16px;z-index:900;border:2px solid #e5e7eb;background:#fff;border-radius:999px;width:48px;height:48px;
      display:flex;align-items:center;justify-content:center;box-shadow:0 8px 24px rgba(0,0,0,.15)
    }
    .floating-dark i{font-size:1.1rem}
    html[data-theme="dark"] .floating-dark{background:#0b1220;border-color:#1f2a44;color:#e5e7eb}

    .load-more-wrap{text-align:center;margin-top:1rem}

    @media (max-width: 576px) {
      #produkModal .modal-footer{ display:flex; flex-wrap:nowrap; gap:.5rem; justify-content:space-between; }
      #produkModal .modal-footer .btn{ flex:1 1 0; min-width:0; white-space:nowrap; }
    }
    @media (max-width: 400px){
      #produkModal .modal-footer .btn i { margin-right:0; }
      #produkModal .modal-footer .btn span { display:none; }
    }

    /* ========== SECTION BARU: HERO ========== */
    .hero-section{
      padding:2.75rem 0 2.25rem;
      background:radial-gradient(circle at top left,rgba(129,140,248,.18),transparent 55%),
                 radial-gradient(circle at bottom right,rgba(45,212,191,.16),transparent 55%);
      border-bottom:1px solid #e5e7eb;
    }
    html[data-theme="dark"] .hero-section{
      background:radial-gradient(circle at top left,rgba(129,140,248,.22),transparent 55%),
                 radial-gradient(circle at bottom right,rgba(45,212,191,.22),transparent 55%);
      border-color:#1f2937;
    }
    .hero-badge{
      display:inline-flex;align-items:center;gap:.4rem;
      padding:.3rem .75rem;border-radius:999px;
      background:rgba(15,23,42,.03);border:1px solid rgba(148,163,184,.5);
      font-size:.78rem;font-weight:600;color:var(--muted-color);
    }
    html[data-theme="dark"] .hero-badge{
      background:rgba(15,23,42,.6);border-color:#374151;
    }
    .hero-title{
      font-size:2.1rem;font-weight:800;margin:.75rem 0 .4rem;
      letter-spacing:.02em;
    }
    @media(min-width:768px){
      .hero-title{font-size:2.5rem;}
    }
    .hero-subtitle{
      max-width:34rem;font-size:.98rem;color:var(--muted-color);
    }
    .hero-actions{margin-top:1.2rem;display:flex;flex-wrap:wrap;gap:.75rem;}
    .hero-pill{
      display:inline-flex;align-items:center;gap:.35rem;
      font-size:.8rem;color:var(--muted-color);
    }
    .hero-stat-card{
      border-radius:16px;
      padding:.9rem 1rem;
      background:#f9fafb;
      border:1px solid #e5e7eb;
      text-align:left;
    }
    html[data-theme="dark"] .hero-stat-card{
      background:#020617;
      border-color:#1f2937;
    }
    .hero-stat-value{
      font-weight:800;font-size:1.1rem;
    }
    .hero-stat-label{
      font-size:.8rem;color:var(--muted-color);
    }

    /* ========== SECTION BARU: KEUNGGULAN (b) ========== */
    .benefit-section{
      padding:2.5rem 0 1.5rem;
      background:var(--bg-surface);
      border-top:1px solid #e5e7eb;
    }
    html[data-theme="dark"] .benefit-section{
      border-color:#1f2937;
    }
    .benefit-card{
      border-radius:18px;
      padding:1.1rem 1.1rem;
      background:#f9fafb;
      border:1px solid #e5e7eb;
      height:100%;
      box-shadow:0 8px 24px rgba(15,23,42,.04);
    }
    html[data-theme="dark"] .benefit-card{
      background:#020617;
      border-color:#1f2937;
      box-shadow:0 18px 45px rgba(0,0,0,.85);
    }
    .benefit-icon-wrap{
      width:40px;height:40px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      background:rgba(129,140,248,.12);
      color:#4f46e5;
      margin-bottom:.65rem;
    }
    html[data-theme="dark"] .benefit-icon-wrap{
      background:rgba(129,140,248,.3);
      color:#c7d2fe;
    }
    .benefit-title{font-weight:700;font-size:.98rem;margin-bottom:.25rem;}
    .benefit-text{font-size:.88rem;color:var(--muted-color);}

    /* ========== SECTION BARU: CARA ORDER (c) ========== */
    .steps-section{
      padding:2.25rem 0 1.75rem;
      background:var(--light-color);
    }
    html[data-theme="dark"] .steps-section{
      background:#020617;
    }
    .step-item{
      display:flex;gap:.75rem;align-items:flex-start;
    }
    .step-badge{
      flex-shrink:0;
      width:30px;height:30px;border-radius:999px;
      display:flex;align-items:center;justify-content:center;
      font-weight:700;font-size:.82rem;
      background:rgba(79,70,229,.12);
      color:#4f46e5;
    }
    html[data-theme="dark"] .step-badge{
      background:rgba(79,70,229,.32);
      color:#c7d2fe;
    }
    .step-title{font-weight:600;font-size:.95rem;margin-bottom:.15rem;}
    .step-text{font-size:.87rem;color:var(--muted-color);}

    /* ========== SECTION BARU: TESTIMONI (d) ========== */
    .testimonial-section{
      padding:2.3rem 0 1.7rem;
      background:var(--bg-surface);
    }
    .testimonial-card{
      border-radius:18px;
      padding:1rem 1rem .95rem;
      border:1px solid #e5e7eb;
      background:radial-gradient(circle at top left,rgba(129,140,248,.07),transparent 55%),
                 #f9fafb;
      height:100%;
    }
    html[data-theme="dark"] .testimonial-card{
      background:radial-gradient(circle at top left,rgba(129,140,248,.24),transparent 55%),
                 #020617;
      border-color:#1f2937;
    }
    .testimonial-name{font-weight:600;font-size:.95rem;}
    .testimonial-meta{font-size:.78rem;color:var(--muted-color);}
    .testimonial-text{font-size:.88rem;margin-top:.35rem;}

    /* ========== SECTION BARU: FAQ (e) ========== */
    .faq-section{
      padding:2.4rem 0 1.8rem;
      background:var(--light-color);
    }
    html[data-theme="dark"] .faq-section{
      background:#020617;
    }
    .faq-accordion .accordion-item{
      border-radius:14px;
      margin-bottom:.65rem;
      overflow:hidden;
      border:1px solid #e5e7eb;
    }
    .faq-accordion .accordion-button{
      font-weight:600;
      font-size:.92rem;
      padding:.65rem .9rem;
      background:#f9fafb;
    }
    .faq-accordion .accordion-body{
      font-size:.88rem;
      padding:.7rem .9rem .8rem;
    }
    html[data-theme="dark"] .faq-accordion .accordion-item{
      border-color:#1f2937;
    }
    html[data-theme="dark"] .faq-accordion .accordion-button{
      background:#020617;
      color:var(--text-main);
    }
    html[data-theme="dark"] .faq-accordion .accordion-body{
      background:#020617;
      color:var(--muted-color);
    }

    /* ========== SECTION BARU: KONTAK / FOOTER (f) ========== */
    .contact-section{
      padding:2.2rem 0 1.5rem;
      background:var(--bg-surface);
      border-top:1px solid #e5e7eb;
    }
    html[data-theme="dark"] .contact-section{
      border-color:#1f2937;
    }
    .contact-pill{
      display:inline-flex;align-items:center;gap:.4rem;
      padding:.25rem .7rem;border-radius:999px;
      border:1px solid rgba(148,163,184,.6);
      font-size:.78rem;color:var(--muted-color);
    }
    .contact-link{
      display:inline-flex;align-items:center;gap:.45rem;
      font-size:.9rem;
      text-decoration:none;
      color:var(--text-main);
    }
    .contact-link i{font-size:1.1rem;}
    .contact-link:hover{
      text-decoration:none;
      opacity:.85;
    }
    html[data-theme="dark"] .contact-section .text-muted,
    html[data-theme="dark"] .contact-section .small.text-muted {
      color: #cbd5e1 !important;
      text-shadow: 0 0 3px rgba(0,0,0,0.6);
    }

    .footer-mini{
      border-top:1px solid rgba(148,163,184,.4);
      margin-top:1.25rem;
      padding-top:.7rem;
      font-size:.78rem;
      color:var(--muted-color);
    }

    /* ==== SEARCH OVERLAY NAVBAR ==== */
    .search-overlay{
      position:fixed;
      top:var(--nav-h);
      left:0;
      right:0;
      z-index:1200;
      padding:.5rem 0;
      transform:translateY(-100%);
      opacity:0;
      pointer-events:none;
      transition:transform .25s ease, opacity .25s ease;
      background:rgba(255,255,255,.96);
      border-bottom:1px solid #e2e8f0;
    }
    html[data-theme="dark"] .search-overlay{
      background:rgba(15,23,42,.98);
      border-color:#1f2937;
    }

    .search-overlay.open{
      transform:translateY(0);
      opacity:1;
      pointer-events:auto;
    }

    .search-overlay-inner{
      display:flex;
      align-items:center;
      gap:.5rem;
      border-radius:999px;
      padding:.4rem .75rem;
      background:var(--light-color);
      box-shadow:0 10px 30px rgba(15,23,42,.25);
    }
    html[data-theme="dark"] .search-overlay-inner{
      background:#020617;
    }

    .search-overlay .overlay-icon{
      color:#64748b;
    }

    .search-overlay .search-input{
      border:none;
      background:transparent;
      padding-left:0;
      box-shadow:none;
      color:var(--text-main);
    }
    .search-overlay .search-input:focus{
      outline:none;
      box-shadow:none;
    }

    .search-overlay .close-search i{
      font-size:1.1rem;
    }

    @media (max-width:576px){
      .search-overlay-inner{
        border-radius:14px;
      }
    }

    .nav-icon-btn{
      width:42px;
      height:42px;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .d-flex.gap-1 > *{
      margin:0 !important;
    }

/* ==== Cara Order versi minimalis ==== */
.steps-section{
  padding: 2rem 0 1.75rem;
}

.steps-minimal{
  max-width: 900px;
  margin: 0 auto;
  margin-top: 1.5rem;
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 1.25rem;
}

@media (max-width: 992px){
  .steps-minimal{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 576px){
  .steps-minimal{
    grid-template-columns: 1fr;
  }
}

.step-pill{
  display: flex;
  flex-direction: column;
  gap: .4rem;
  padding: .85rem .9rem;
  border-radius: 16px;
  background: rgba(148,163,184,.06);
  border: 1px solid rgba(148,163,184,.3);
}

html[data-theme="dark"] .step-pill{
  background: rgba(15,23,42,.9);
  border-color: #1f2937;
}

.step-pill-number{
  width: 26px;
  height: 26px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: .8rem;
  font-weight: 700;
  background: rgba(129,140,248,.16);
  color: #4f46e5;
}

html[data-theme="dark"] .step-pill-number{
  background: rgba(129,140,248,.35);
  color: #c7d2fe;
}

.step-pill-title{
  font-size: .9rem;
  font-weight: 600;
}

.step-pill-text{
  font-size: .8rem;
  color: var(--muted-color);
  margin: 0;
}

  </style>
</head>
<body>
  <div class="container-fluid">
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg nav-glass" id="mainNavbar">
      <div class="container">
        <a class="navbar-brand" href="index.html">Putra Btt Store</a>

        <div class="d-flex align-items-center d-lg-none ms-auto gap-1">
          
          <!-- Search icon mobile -->
          <button class="nav-icon-btn d-inline-flex" type="button" data-nav-search>
            <i class="fa-solid fa-magnifying-glass"></i>
          </button>

          <!-- Menu toggler mobile -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
            <span class="navbar-toggler-icon"></span>
          </button>

        </div>
        
        <div class="collapse navbar-collapse" id="mainNav">
          <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-1">
            <li class="nav-item"><a class="nav-link" data-scroll href="#produk">Produk</a></li>
            <li class="nav-item"><a class="nav-link" href="rekomendasi.html">Rekomendasi</a></li>
            <li class="nav-item"><a class="nav-link" href="about.html">Tentang</a></li>
          </ul>

          <!-- ICON UNTUK DESKTOP -->
          <div class="d-flex align-items-center gap-2 ms-lg-3">
            <button class="nav-icon-btn position-relative d-none d-lg-inline-flex"
                    title="Cari Produk" data-nav-search>
              <i class="fa-solid fa-magnifying-glass"></i>
            </button>

            <button id="navDarkBtn" class="nav-icon-btn position-relative" title="Toggle Dark Mode">
              <i class="fa-solid fa-moon"></i>
            </button>

            <button class="nav-icon-btn position-relative" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart">
              <i class="fa-solid fa-bag-shopping"></i>
              <span id="navCartCount" class="nav-cart-count">0</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- ========== HERO SECTION (a) ========== -->
    <section class="hero-section">
      <div class="container">
        <div class="row g-4 align-items-center">
          <div class="col-md-7">
            <div class="hero-badge">
              <i class="fa-solid fa-shield-check"></i>
              <span>Produk digital cepat, aman, dan bergaransi</span>
            </div>
            <h1 class="hero-title">
              Semua Aplikasi Premium<br class="d-none d-md-block" />
              Dalam Satu Toko Digital.
            </h1>
            <p class="hero-subtitle">
              Dapatkan akses Netflix, YouTube Premium, Spotify, Canva Pro, CapCut, dan banyak lagi
              dengan harga bersahabat dan dukungan admin yang responsif.
            </p>
            <div class="hero-actions">
              <a href="#listProduk" data-scroll class="btn btn-primary px-4 py-2">
                <i class="fa-solid fa-tags me-2"></i> Lihat Harga & Produk
              </a>
              <a href="https://wa.me/6282340915319" target="_blank" class="btn btn-outline-success px-4 py-2">
                <i class="fa-brands fa-whatsapp me-2"></i> Chat Admin
              </a>
            </div>
            <div class="d-flex flex-wrap align-items-center gap-3 mt-3">
              <div class="hero-pill">
                <i class="fa-solid fa-bolt"></i>
                <span>Proses estimasi 1–10 menit*</span>
              </div>
              <div class="hero-pill">
                <i class="fa-solid fa-shield-halved"></i>
                <span>Garansi selama masa langganan sesuai dengan ketentuan yang berlaku</span>
              </div>
            </div>
          </div>
          <div class="col-md-5">
            <div class="row g-3">
              <div class="col-6">
                <div class="hero-stat-card">
                  <div class="hero-stat-value">1.000+</div>
                  <div class="hero-stat-label">Pesanan terselesaikan</div>
                </div>
              </div>
              <div class="col-6">
                <div class="hero-stat-card">
                  <div class="hero-stat-value">4.9/5</div>
                  <div class="hero-stat-label">Rata-rata kepuasan pelanggan</div>
                </div>
              </div>
              <div class="col-12">
                <div class="hero-stat-card d-flex align-items-center gap-3">
                  <div class="benefit-icon-wrap mb-0">
                    <i class="fa-solid fa-qrcode"></i>
                  </div>
                  <div>
                    <div class="hero-stat-label mb-1">Metode Pembayaran</div>
                    <div class="hero-stat-value">QRIS • Transfer • E-Wallet*</div>
                    <div class="small text-muted mt-1">*Disesuaikan dengan kebijakan terbaru Putra Btt Store.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Search Overlay -->
    <div id="searchOverlay" class="search-overlay">
      <div class="container">
        <div class="search-overlay-inner">
          <i class="fas fa-search overlay-icon"></i>
          <input type="text" id="searchInput" class="form-control search-input"
                placeholder="Cari produk favorit Anda..." />
          <button class="btn btn-link text-decoration-none close-search" id="btnCloseSearch" aria-label="Tutup">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
      </div>
    </div>    

    <!-- Info Modal (diisi dari Google Sheet: informasi_modal) -->
    <div class="modal fade" id="infoModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">
              <i class="fa-solid fa-circle-info me-2"></i> Informasi Terbaru
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Tutup"></button>
          </div>
          <div class="modal-body" id="infoModalBody">
            <!-- Akan diisi dari Sheet -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" id="btnInfoRead" data-bs-dismiss="modal">
              Sudah Membaca
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- MAIN -->
    <main id="produk">
      <!-- ========== SECTION c: CARA ORDER ========== -->
      <section class="steps-section" id="cara-order">
        <div class="container">
          <h2 class="section-title">Cara Order di Putra Btt Store</h2>
          <p class="section-subtitle">Empat langkah singkat sampai akunmu aktif.</p>

          <div class="steps-minimal">
            <div class="step-pill">
              <span class="step-pill-number">1</span>
              <div class="step-pill-title">Pilih produk</div>
              <p class="step-pill-text">
                Scroll daftar produk, pilih paket yang sesuai kebutuhanmu.
              </p>
            </div>

            <div class="step-pill">
              <span class="step-pill-number">2</span>
              <div class="step-pill-title">Tambahkan ke keranjang</div>
              <p class="step-pill-text">
                Klik <strong>Keranjang</strong> pada produk yang ingin kamu beli.
              </p>
            </div>

            <div class="step-pill">
              <span class="step-pill-number">3</span>
              <div class="step-pill-title">Checkout via WhatsApp</div>
              <p class="step-pill-text">
                Tekan tombol <strong>Checkout via WhatsApp</strong> dan kirim pesan ke admin.
              </p>
            </div>

            <div class="step-pill">
              <span class="step-pill-number">4</span>
              <div class="step-pill-title">Bayar & tunggu proses</div>
              <p class="step-pill-text">
                Lakukan pembayaran, pesanan diproses dan akun dikirim lewat WhatsApp.
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- PRODUK (LIST DARI SHEET) -->
      <section class="products-section" id="listProduk">
        <div class="container">
          <h2 class="section-title">Produk Digital Terpilih</h2>
          <p class="section-subtitle">Dapatkan akses premium ke aplikasi dan layanan terbaik dengan harga ramah di kantong</p>
          <div class="row g-3" id="produk-list"></div>
          <div class="load-more-wrap">
            <button id="btnLoadMore" class="btn btn-outline-primary px-4 py-2 mt-2">
              <i class="fa-solid fa-rotate"></i> Muat Lebih
            </button>
          </div>
        </div>
      </section>

      <!-- ========== SECTION b: KENAPA HARUS PUTRA BTT STORE ========== -->
      <section class="benefit-section" id="keunggulan">
        <div class="container">
          <h2 class="section-title">Kenapa Harus Putra Btt Store?</h2>
          <p class="section-subtitle">Bukan hanya murah, tapi juga aman, jelas, dan mudah dipahami bahkan untuk pemula.</p>

          <div class="row g-3 g-md-4 mt-2">
            <div class="col-md-3 col-sm-6">
              <div class="benefit-card">
                <div class="benefit-icon-wrap"><i class="fa-solid fa-shield-heart"></i></div>
                <div class="benefit-title">Aman & Terpercaya</div>
                <p class="benefit-text">
                  Sudah melayani ratusan pelanggan dengan sistem yang jelas dan transparan. Order tercatat rapi dan mudah dilacak.
                </p>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="benefit-card">
                <div class="benefit-icon-wrap"><i class="fa-solid fa-bolt"></i></div>
                <div class="benefit-title">Proses Cepat</div>
                <p class="benefit-text">
                  Estimasi proses 1–10 menit (jam kerja), dengan notifikasi yang jelas kapan order mulai diproses.
                </p>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="benefit-card">
                <div class="benefit-icon-wrap"><i class="fa-solid fa-arrows-rotate"></i></div>
                <div class="benefit-title">Garansi Masa Pakai</div>
                <p class="benefit-text">
                  Jika akun bermasalah di masa garansi, akan dibantu sampai selesai sesuai ketentuan yang berlaku.
                </p>
              </div>
            </div>
            <div class="col-md-3 col-sm-6">
              <div class="benefit-card">
                <div class="benefit-icon-wrap"><i class="fa-solid fa-headset"></i></div>
                <div class="benefit-title">Support Ramah</div>
                <p class="benefit-text">
                  Admin responsif dan komunikatif, siap membantu jelaskan perbedaan paket sampai cara pakai akun.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      

      <!-- ========== SECTION d: TESTIMONI ========== -->
      <section class="testimonial-section" id="testimoni">
        <div class="container">
          <h2 class="section-title">Apa Kata Pelanggan?</h2>
          <p class="section-subtitle">Beberapa testimoni yang sudah berbelanja produk digital di Putra Btt Store.</p>

          <div class="row g-3 g-md-4 mt-2">
            <div class="col-md-4">
              <div class="testimonial-card">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <div class="testimonial-name">R*** – Lombok</div>
                    <div class="testimonial-meta">YouTube Premium 3 Bulan</div>
                  </div>
                  <div class="text-warning">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star-half-stroke"></i>
                  </div>
                </div>
                <p class="testimonial-text">
                  “Proses cepat, admin ramah, dan dibantu sampai akun aktif. Bakal langganan lagi kalau habis.”
                </p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="testimonial-card">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <div class="testimonial-name">S*** – Mahasiswa</div>
                    <div class="testimonial-meta">Canva Pro + CapCut Pro</div>
                  </div>
                  <div class="text-warning">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                  </div>
                </div>
                <p class="testimonial-text">
                  “Buat tugas kampus jadi jauh lebih gampang. Harganya juga masih masuk akal buat kantong anak kuliah.”
                </p>
              </div>
            </div>
            <div class="col-md-4">
              <div class="testimonial-card">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <div class="testimonial-name">A*** – Freelancer</div>
                    <div class="testimonial-meta">Netflix & Spotify</div>
                  </div>
                  <div class="text-warning">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                  </div>
                </div>
                <p class="testimonial-text">
                  “Sudah beberapa kali perpanjang, sejauh ini aman dan kalau ada kendala selalu dibantu sampai beres.”
                </p>
              </div>
            </div>
          </div>

          <p class="small text-muted mt-3">
            *Testimoni di atas merupakan rangkuman dari beberapa pelanggan. Untuk bukti transfer dan testimoni lengkap dapat diminta langsung ke admin.
          </p>
        </div>
      </section>

      <!-- ========== SECTION e: FAQ ========== -->
      <section class="faq-section" id="faq">
        <div class="container">
          <h2 class="section-title">Pertanyaan yang Sering Diajukan</h2>
          <p class="section-subtitle">Masih ragu atau bingung? Cek dulu beberapa pertanyaan umum berikut.</p>

          <div class="row g-4 mt-2">
            <div class="col-md-7">
              <div class="accordion faq-accordion" id="faqAccordion">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="faqOneHeading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqOne" aria-expanded="false" aria-controls="faqOne">
                      Berapa lama proses order biasanya?
                    </button>
                  </h2>
                  <div id="faqOne" class="accordion-collapse collapse" aria-labelledby="faqOneHeading" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                      Estimasi proses normal antara <strong>1–10 menit</strong> pada jam operasional. Jika sedang ramai atau ada kendala teknis, admin akan menginformasikan estimasi terbaru.
                    </div>
                  </div>
                </div>

                <div class="accordion-item">
                  <h2 class="accordion-header" id="faqTwoHeading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqTwo" aria-expanded="false" aria-controls="faqTwo">
                      Kalau akun bermasalah di tengah masa langganan bagaimana?
                    </button>
                  </h2>
                  <div id="faqTwo" class="accordion-collapse collapse" aria-labelledby="faqTwoHeading" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                      Silakan langsung hubungi admin dengan menyertakan bukti order. Selama masih dalam masa garansi dan sesuai ketentuan, akan dibantu
                      <strong>perbaikan atau penggantian</strong> sesuai kebijakan Putra Btt Store.
                    </div>
                  </div>
                </div>

                <div class="accordion-item">
                  <h2 class="accordion-header" id="faqThreeHeading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqThree" aria-expanded="false" aria-controls="faqThree">
                      Metode pembayaran yang tersedia apa saja?
                    </button>
                  </h2>
                  <div id="faqThree" class="accordion-collapse collapse" aria-labelledby="faqThreeHeading" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                      Untuk saat ini pembayaran dapat dilakukan melalui <strong>QRIS</strong> dan metode lain yang diinformasikan admin (seperti transfer bank
                      atau e-wallet tertentu). Detail rekening akan dikirim setelah kamu checkout via WhatsApp.
                    </div>
                  </div>
                </div>

                <div class="accordion-item">
                  <h2 class="accordion-header" id="faqFourHeading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFour" aria-expanded="false" aria-controls="faqFour">
                      Apakah akun bisa dipakai di banyak perangkat?
                    </button>
                  </h2>
                  <div id="faqFour" class="accordion-collapse collapse" aria-labelledby="faqFourHeading" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                      Setiap aplikasi punya <strong>aturan penggunaan</strong> berbeda. Admin akan menjelaskan apakah akun boleh dipakai multi device,
                      hanya 1 device, atau ada batasan login tertentu sebelum kamu melakukan pembayaran.
                    </div>
                  </div>
                </div>

                <div class="accordion-item">
                  <h2 class="accordion-header" id="faqFiveHeading">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqFive" aria-expanded="false" aria-controls="faqFive">
                      Apakah ini akun legal?
                    </button>
                  </h2>
                  <div id="faqFive" class="accordion-collapse collapse" aria-labelledby="faqFiveHeading" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                      Putra Btt Store berusaha mengikuti <strong>kebijakan penggunaan</strong> dari masing-masing platform. Detail terkait jenis akun
                      (sharing, personal, family, dan lain-lain) akan dijelaskan oleh admin sesuai produk yang kamu pilih.
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-5">
              <div class="benefit-card">
                <div class="benefit-icon-wrap mb-2">
                  <i class="fa-solid fa-circle-question"></i>
                </div>
                <div class="benefit-title mb-1">Masih ada yang ingin ditanyakan?</div>
                <p class="benefit-text mb-3">
                  Kalau pertanyaanmu belum terjawab, kamu bisa langsung hubungi admin lewat WhatsApp. Jelaskan kebutuhanmu,
                  nanti akan direkomendasikan paket yang paling pas.
                </p>
                <a href="https://wa.me/6282340915319?text=Halo%20min%2C%20saya%20mau%20tanya%20dulu%20sebelum%20order%20produk%20digital." target="_blank"
                   class="btn btn-success w-100">
                  <i class="fa-brands fa-whatsapp me-2"></i> Tanya Admin Sekarang
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== SECTION f: KONTAK & FOOTER ========== -->
      <section class="contact-section" id="kontak">
        <div class="container">
          <div class="row g-3 align-items-start">
            <div class="col-md-5">
              <span class="contact-pill mb-2">
                <i class="fa-solid fa-building"></i>
                <span>Putra Btt Store</span>
              </span>
              <h3 class="mt-2 mb-2" style="font-size:1.35rem;font-weight:700;">Hubungi & Ikuti Putra Btt Store</h3>
              <p class="mb-2" style="font-size:.9rem;color:var(--muted-color);">
                Untuk info promo terbaru, update layanan, dan panduan lengkap, kamu bisa menyimpan kontak dan follow channel berikut.
              </p>
              <ul class="list-unstyled small mb-0">
                <li>Jam operasional: <strong>08.00 – 23.00 WITA</strong></li>
                <li>Di luar jam tersebut, respon mungkin sedikit lebih lambat.</li>
              </ul>
            </div>
            <div class="col-md-7">
              <div class="row g-2">
                <div class="col-sm-6">
                  <a href="https://wa.me/6282340915319" target="_blank" class="contact-link">
                    <i class="fa-brands fa-whatsapp text-success"></i>
                    <div>
                      <div>WhatsApp Admin</div>
                      <div class="small text-muted">Tanya produk, cek harga, dan konfirmasi pembayaran.</div>
                    </div>
                  </a>
                </div>
                <div class="col-sm-6">
                  <a href="#" class="contact-link">
                    <i class="fa-brands fa-whatsapp text-success"></i>
                    <div>
                      <div>WhatsApp Group</div>
                      <div class="small text-muted">Informasi terbaru mengenai produk dan promo</div>
                    </div>
                  </a>
                </div>
                <div class="col-sm-6">
                  <a href="https://t.me/AutoOrderPBS_bot" target="_blank" class="contact-link">
                    <i class="fa-brands fa-telegram text-primary"></i>
                    <div>
                      <div>Telegram Bot Auto Order</div>
                      <div class="small text-muted">Pesan produk digital otomatis lewat Telegram.</div>
                    </div>
                  </a>
                </div>
                <div class="col-sm-6">
                  <a href="https://putrabttstore.web.id" target="_blank" class="contact-link">
                    <i class="fa-solid fa-globe"></i>
                    <div>
                      <div>Website Putra Btt Store</div>
                      <div class="small text-muted">Informasi lengkap produk & layanan terbaru.</div>
                    </div>
                  </a>
                </div>
              </div>
            </div>
          </div>

          <div class="footer-mini mt-3">
            <div class="d-flex flex-wrap justify-content-between gap-2">
              <span>&copy; <span id="footerYear"></span> Putra Btt Store. All rights reserved.</span>
              <span>Made with <i class="fa-solid fa-heart text-danger"></i> dari Lombok.</span>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal Detail -->
  <div class="modal fade" id="produkModal" tabindex="-1" aria-labelledby="produkModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
      <div class="modal-content" id="produkModalContent">
        <div class="modal-header">
          <h5 class="modal-title" id="produkModalLabel"><i class="fas fa-info-circle me-2"></i> Detail Produk</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Tutup"></button>
        </div>
        <div class="modal-body" id="modalBody"></div>
        <div class="modal-footer">
          <button class="btn btn-outline-primary" id="modalAddCart"><i class="fa-solid fa-cart-plus me-2"></i><span>Keranjang</span></button>
          <a href="#" class="btn btn-success" id="modalPesanBtn" target="_blank"><i class="fab fa-whatsapp me-2"></i><span>Pesan Sekarang</span></a>
        </div>
      </div>
    </div>
  </div>

  <!-- Offcanvas Cart -->
  <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCart" aria-labelledby="offcanvasCartLabel">
    <div class="offcanvas-header">
      <button class="btn btn-link text-decoration-none d-inline d-md-none me-2" data-bs-dismiss="offcanvas" aria-label="Kembali">
        <i class="fa-solid fa-chevron-left"></i>
      </button>
      <h5 class="offcanvas-title" id="offcanvasCartLabel"><i class="fa-solid fa-basket-shopping me-2"></i>Keranjang</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
      <div id="cartItems" class="mb-3"></div>
      <div class="d-flex justify-content-between fw-bold fs-5">
        <span>Total</span><span id="cartTotal">Rp0</span>
      </div>
      <div class="mt-3 d-grid gap-2">
        <button class="btn btn-outline-danger" id="btnClearCart"><i class="fa-solid fa-trash me-2"></i>Hapus Keranjang</button>
        <a href="#" target="_blank" id="btnCheckoutWA" class="btn btn-success"><i class="fab fa-whatsapp me-2"></i>Checkout via WhatsApp</a>
      </div>
    </div>
  </div>

  <!-- Floating buttons -->
  <button class="floating-cart" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCart" aria-controls="offcanvasCart">
    <i class="fa-solid fa-bag-shopping"></i><span class="count" id="cartCount">0</span>
  </button>
  <button class="floating-dark" id="floatingDarkBtn" title="Toggle Dark Mode">
    <i class="fa-solid fa-moon"></i>
  </button>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ======== NAVBAR HEIGHT → CSS var --nav-h ========
    const navbar = document.getElementById('mainNavbar');
  function setNavOffset() {
    const h = navbar ? navbar.offsetHeight : 64;
    document.documentElement.style.setProperty('--nav-h', h + 'px');
  }
  ['resize', 'orientationchange'].forEach(ev => {
    window.addEventListener(ev, setNavOffset);
  });
  document.addEventListener('shown.bs.collapse', setNavOffset);
  document.addEventListener('hidden.bs.collapse', setNavOffset);
  document.addEventListener('shown.bs.modal', setNavOffset);
  setNavOffset();

  // ========= SHEETS CONFIG =========
  const SHEET_ID       = "16fNB7oX2-PIIuNDjrzL3xgtNSQTTnxC2gxW2x78GoHI";
  const SHEET_NAME     = "Produk";
  const SHEET_NAME_INFO = "informasi_modal";

  const DEFAULT_WA = "6282340915319";

  const SHEET_JSON_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;
  const SHEET_INFO_JSON_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME_INFO)}`;

  // ========= STATE =========
  let produkVariants = []; // tiap baris sheet = varian
  let produkGroups   = []; // hasil dikelompokkan per kolom group
  let viewData       = [];
  let page = 1;
  const perPage = 12;

  const produkList  = document.getElementById("produk-list");
  const searchInput = document.getElementById("searchInput");
  const btnLoadMore = document.getElementById("btnLoadMore");

  const CART_KEY = "pbt_cart";
  const WISH_KEY = "pbt_wishlist";

  const categoryIconsFA = {
    "Langganan":   "fa-bell",
    "Streaming":   "fa-tv",
    "Penyimpanan": "fa-hard-drive",
    "Software":    "fa-puzzle-piece",
    "Desain":      "fa-palette",
    "Produktivitas":"fa-book",
    "AI Tools":    "fa-robot",
    "Keamanan":    "fa-shield-halved",
    "Game":        "fa-gamepad",
    "Voucher":     "fa-gift",
    "Instagram":   "fa-brands fa-instagram",
    "TikTok":      "fa-brands fa-tiktok"
  };

  const money = n => `Rp${(Number(n) || 0).toLocaleString('id-ID')}`;
  const getStorage = (k, f) => {
    try { return JSON.parse(localStorage.getItem(k)) ?? f; }
    catch { return f; }
  };
  const setStorage = (k, v) => localStorage.setItem(k, JSON.stringify(v));

  function showLoading() {
    produkList.innerHTML = `
      <div class="col-12">
        <div class="loading">
          <div class="spinner"></div>
        </div>
      </div>`;
  }

  // ===== Bangun grup dari varian (pakai kolom group) =====
  function buildGroups() {
    const map = new Map();

    produkVariants.forEach(v => {
      const key = v.group || v.nama; // kalau group kosong, fallback nama
      let g = map.get(key);
      if (!g) {
        g = {
          key,
          title: key,
          kategori: v.kategori,
          ikon: v.ikon,
          wa: v.wa || DEFAULT_WA,
          variants: [],
          minHarga: v.harga || 0,
          maxHargaLama: v.harga_lama || 0,
          available: Number(v.stok) > 0
        };
        map.set(key, g);
      }
      g.variants.push(v);
      if ((v.harga || 0) < g.minHarga) g.minHarga = v.harga || 0;
      if ((v.harga_lama || 0) > g.maxHargaLama) g.maxHargaLama = v.harga_lama || 0;
      if (Number(v.stok) > 0) g.available = true;
    });

    produkGroups = Array.from(map.values());
  }

  // ===== Filter di level group (berdasarkan search) =====
  function applyFilterSort() {
    const q = (searchInput.value || "").toLowerCase();

    viewData = produkGroups.filter(g => {
      const inTitle    = (g.title || "").toLowerCase().includes(q);
      const inVariants = g.variants.some(v => (v.nama || "").toLowerCase().includes(q));
      return (inTitle || inVariants);
    });

    page = 1;
  }

  // ===== Render card per group =====
  function renderProduk(append = false) {
    const start = (page - 1) * perPage;
    const slice = viewData.slice(start, start + perPage);

    if (!append) produkList.innerHTML = "";

    if (slice.length === 0 && !append) {
      produkList.innerHTML = `
        <div class="col-12">
          <div class="empty-state">
            <i class="fas fa-search"></i>
            <h4>Produk tidak ditemukan</h4>
            <p>Coba ubah kata kunci</p>
          </div>
        </div>`;
      btnLoadMore.style.display = "none";
      return;
    }

    slice.forEach((group, idx) => {
      const col = document.createElement("div");
      col.className = "col-lg-3 col-md-4 col-sm-6 col-6";

      const catIconClass = categoryIconsFA[group.kategori] || "fa-box";
      const hasDiscount  = (group.maxHargaLama || 0) > (group.minHarga || 0);
      const stokOK       = !!group.available;

      const wishlist = getStorage(WISH_KEY, []);
      const wished   = wishlist.includes(group.key);

      col.innerHTML = `
        <div class="card product-card fade-in" style="animation-delay:${idx * 0.03}s;cursor:pointer" data-detail="${idx + start}">
          <button class="wishlist-btn ${wished ? 'active' : ''}" title="Favorit"
                  data-wish="${encodeURIComponent(group.key)}"
                  onclick="event.stopPropagation()">
            <i class="fa-solid fa-heart"></i>
          </button>
          <div class="category-badge">
            <i class="fa-solid ${catIconClass}"></i>
            <span>${group.kategori || ''}</span>
          </div>
          <div class="card-body p-4 text-center d-flex flex-column" style="flex:1">
            <div class="product-icon">
              <img src="${group.ikon || ''}" alt="${group.title || ''}"
                   onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA1MCA1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNTAiIGhlaWdodD0iNTAiIHJ4PSIxMCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjZTJlOGYwIiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4='">
            </div>
            <h6 class="product-title">${group.title || ''}</h6>
            <div class="price-wrap">
              <span class="price">Mulai ${money(group.minHarga)}</span>
              ${hasDiscount ? `<span class="price-old">${money(group.maxHargaLama)}</span>` : ""}
            </div>
            <div class="d-flex align-items-center justify-content-center gap-2 mb-3" style="flex-wrap:wrap">
              <span class="badge ${stokOK ? 'bg-success-subtle text-success-emphasis' : 'bg-danger-subtle text-danger-emphasis'}" style="padding:.4rem .6rem;font-size:.8rem;font-weight:700">
                ${stokOK ? '✓ Tersedia' : '✕ Habis'}
              </span>
              <span class="badge bg-secondary-subtle text-secondary-emphasis" style="padding:.4rem .6rem;font-size:.8rem;font-weight:700">
                ${group.variants.length} varian
              </span>
            </div>
            <div class="product-actions d-flex">
              <button class="btn-detail icon-btn" ${stokOK ? '' : 'disabled'}
                data-detail="${idx + start}" aria-label="Lihat varian" type="button">

              <i class="fa-solid fa-circle-info me-2"></i><span>Detail</span>
              </button>
            </div>
          </div>
        </div>`;
      produkList.appendChild(col);
    });

    btnLoadMore.style.display =
      (viewData.length > (start + slice.length)) ? "inline-block" : "none";
  }

  // ===== Modal Detail & varian =====
  const modalEl       = document.getElementById('produkModal');
  const bsModal       = new bootstrap.Modal(modalEl);
  const modalAddCart  = document.getElementById('modalAddCart');
  const modalBody     = document.getElementById('modalBody');
  let   currentDetailIdx = null;

  function showDetailByGlobalIndex(globalIdx) {
    const group = viewData[globalIdx];
    currentDetailIdx = globalIdx;

    const catIconClass = categoryIconsFA[group.kategori] || "fa-box";
    const primaryVariant = group.variants.find(v => Number(v.stok) > 0) || group.variants[0];

    const variantsHTML = group.variants.map((v, i) => {
      const fitur = (v.deskripsi || []).map(li =>
        `<li class="variant-feature-item">
          <i class="fas fa-check-circle variant-feature-icon me-2"></i>
          <span>${li}</span>
        </li>`
      ).join("");
      const stokOK = Number(v.stok) > 0;

      return `
        <div class="variant-card mb-3">
          <div class="variant-card-header d-flex justify-content-between align-items-start mb-2">
            <div>
              <div class="variant-card-title fw-semibold">${v.nama}</div>
              <div class="variant-card-label small text-muted">Varian ${i + 1}</div>
            </div>
            <div class="text-end">
              <div class="variant-card-price fw-bold">${money(v.harga)}</div>
              ${(v.harga_lama && v.harga_lama > v.harga)
                ? `<div class="variant-card-price-old small">${money(v.harga_lama)}</div>`
                : ""
              }
              <div class="mt-1">
                <span class="badge ${stokOK ? 'bg-success-subtle text-success-emphasis' : 'bg-danger-subtle text-danger-emphasis'}">
                  ${stokOK ? 'Tersedia' : 'Habis'}
                </span>
              </div>
            </div>
          </div>

          ${fitur ? `<ul class="variant-features list-unstyled mb-2">${fitur}</ul>` : ""}

          <div class="d-flex gap-2 flex-wrap">
            <button class="btn btn-sm btn-outline-primary"
                    data-add-variant="${encodeURIComponent(v.nama)}"
                    ${stokOK ? '' : 'disabled'}>
              <i class="fa-solid fa-cart-plus me-1"></i>Keranjang
            </button>
            <a href="https://wa.me/${encodeURIComponent(v.wa || group.wa || DEFAULT_WA)}?text=${
                encodeURIComponent(`Halo admin, saya ingin pesan ${v.nama} (${money(v.harga)})`)
              }"
              target="_blank"
              class="btn btn-sm btn-success ${stokOK ? '' : 'disabled'}">
              <i class="fab fa-whatsapp me-1"></i>Pesan varian ini
            </a>
          </div>
        </div>`;
    }).join("");

    modalBody.innerHTML = `
      <div class="modal-product-main mb-3">
        <div class="row align-items-center g-3">
          <div class="col-md-4 text-center mb-2 mb-md-0">
            <div class="product-icon modal-product-icon mx-auto">
              <img src="${group.ikon || ''}" alt="${group.title || ''}"
                  style="width:60px;height:60px;"
                  onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxMiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjZTJlOGYwIiBzdHJva2Utd2lkdGg9IjEiLz48L3N2Zz4='">
            </div>
            <span class="badge modal-category-pill mt-2 d-inline-flex align-items-center gap-1">
              <i class="fa-solid ${catIconClass}"></i>
              <span>${group.kategori || ''}</span>
            </span>
          </div>
          <div class="col-md-8">
            <h5 class="modal-product-title mb-1">${group.title || ''}</h5>
            <p class="modal-product-subtitle mb-2">
              Tersedia <strong>${group.variants.length} varian</strong> dengan harga mulai
              <strong>${money(group.minHarga)}</strong>
            </p>
            <div class="modal-product-prices d-flex align-items-baseline gap-2">
              <span class="modal-price-main">${money(group.minHarga)}</span>
              ${(group.maxHargaLama && group.maxHargaLama > group.minHarga)
                ? `<span class="modal-price-old">${money(group.maxHargaLama)}</span>`
                : ""
              }
            </div>
          </div>
        </div>
      </div>

      <hr class="my-3">

      <div class="modal-variant-list">
        ${variantsHTML}
      </div>
    `;

    const modalPesanBtn = document.getElementById("modalPesanBtn");
    if (primaryVariant) {
      modalPesanBtn.href =
        `https://wa.me/${encodeURIComponent(primaryVariant.wa || group.wa || DEFAULT_WA)}?text=${
          encodeURIComponent(`Halo admin, saya ingin pesan ${primaryVariant.nama} (${money(primaryVariant.harga)})`)
        }`;
      modalAddCart.disabled = !(Number(primaryVariant.stok) > 0);
      modalAddCart.dataset.primaryVariant = primaryVariant.nama;
    } else {
      modalPesanBtn.href = "#";
      modalAddCart.disabled = true;
      delete modalAddCart.dataset.primaryVariant;
    }

    bsModal.show();
  }

  // Swipe close modal di mobile
  (function enableModalSwipeClose() {
    const content = document.getElementById('produkModalContent');
    if (!content) return;
    let startY = null;
    content.addEventListener('touchstart', e => {
      startY = e.touches[0].clientY;
    }, { passive: true });
    content.addEventListener('touchmove', e => {
      if (startY === null) return;
      const dy = e.touches[0].clientY - startY;
      if (dy > 80) {
        startY = null;
        bsModal.hide();
      }
    }, { passive: true });
    content.addEventListener('touchend', () => {
      startY = null;
    });
  })();

  modalBody.addEventListener('click', (e) => {
    const btn = e.target.closest('[data-add-variant]');
    if (!btn) return;
    const namaVar = decodeURIComponent(btn.dataset.addVariant);
    addToCart(namaVar, 1);
    new bootstrap.Offcanvas('#offcanvasCart').show();
  });

  // ===== Load data dari Sheet (tab Produk) =====
  async function loadProdukFromSheet() {
    showLoading();
    try {
      const res  = await fetch(SHEET_JSON_URL, { cache: 'no-store' });
      const text = await res.text();
      const json = JSON.parse(text.substring(47, text.length - 2));
      const rows = json.table.rows || [];

      // nama, harga, ikon, deskripsi, kategori, wa, harga_lama, stok, kode, group
      produkVariants = rows.map((r, idx) => {
        const c = r.c || [];
        const nama       = c[0]?.v ?? "";
        const harga      = Number(c[1]?.v ?? 0) || 0;
        const ikon       = c[2]?.v ?? "";
        const deskripsi  = (c[3]?.v ?? "").toString().split("||").map(s => s.trim()).filter(Boolean);
        const kategori   = c[4]?.v ?? "";
        const wa         = c[5]?.v ?? DEFAULT_WA;
        const harga_lama = Number(c[6]?.v ?? 0) || 0;
        const stok       = Number(c[7]?.v ?? 0) || 0;
        const kode       = c[8]?.v ?? "";
        const group      = c[9]?.v ?? "";
        return { id: idx, nama, harga, ikon, deskripsi, kategori, wa, harga_lama, stok, kode, group };
      });

      buildGroups();
      applyFilterSort();
      renderProduk(false);
      document.body.classList.add('loaded');
    } catch (err) {
      console.error(err);
      produkList.innerHTML = `
        <div class="col-12">
          <div class="empty-state">
            <i class="fas fa-triangle-exclamation"></i>
            <h4>Gagal memuat data</h4>
            <p>Cek pengaturan share Sheet, ID, dan kolom group</p>
            <code>${SHEET_JSON_URL}</code>
          </div>
        </div>`;
      btnLoadMore.style.display = "none";
    }
  }

  // ====== Info Modal: load dari sheet `informasi_modal` ======
  async function loadInfoModalFromSheet() {
    try {
      const res  = await fetch(SHEET_INFO_JSON_URL, { cache: 'no-store' });
      const text = await res.text();
      const json = JSON.parse(text.substring(47, text.length - 2));
      const rows = json.table.rows || [];

      const items = rows.map(r => {
        const c = r.c || [];
        const judul     = c[0]?.v ?? "";
        const konten    = c[1]?.v ?? "";
        const levelRaw  = (c[2]?.v ?? "info").toString().toLowerCase();
        const aktifRaw  = (c[3]?.v ?? "").toString().trim().toLowerCase();
        const updatedAt = c[4]?.v ?? "";

        const aktif = aktifRaw === "1" || aktifRaw === "ya" || aktifRaw === "true";
        return { judul, konten, level: levelRaw, aktif, updatedAt };
      }).filter(it => it.aktif && (it.judul || it.konten));

      // Kalau tidak ada info aktif, tidak usah tampilkan modal
      if (!items.length) return;

      const bodyEl  = document.getElementById("infoModalBody");
      const modalEl = document.getElementById("infoModal");
      if (!bodyEl || !modalEl) return;

      const levelClass = level => {
        switch (level) {
          case "warning": return "bg-warning-subtle text-warning-emphasis";
          case "promo":   return "bg-success-subtle text-success-emphasis";
          default:        return "bg-primary-subtle text-primary-emphasis";
        }
      };

      bodyEl.innerHTML = items.map((it, idx) => `
        <div class="mb-3 pb-3 ${idx < items.length - 1 ? 'border-bottom' : ''}">
          <div class="d-flex justify-content-between align-items-start mb-1">
            <div class="badge ${levelClass(it.level)} px-3 py-1 rounded-pill">
              ${it.level === "promo" ? "PROMO" : it.level === "warning" ? "PENGUMUMAN" : "INFORMASI"}
            </div>
            ${it.updatedAt ? `<small class="text-muted">${it.updatedAt}</small>` : ""}
          </div>
          ${it.judul ? `<h6 class="mb-1">${it.judul}</h6>` : ""}
          <div class="small" style="white-space:pre-line;">${it.konten}</div>
        </div>
      `).join("");

      const infoModal = new bootstrap.Modal(modalEl);
      infoModal.show();

      // Tombol "Saya sudah baca" sekarang cuma menutup modal (optional)
      const btn = document.getElementById("btnInfoRead");
      if (btn) {
        btn.addEventListener("click", () => {
          infoModal.hide();
        }, { once: true });
      }
    } catch (err) {
      console.error("Gagal memuat informasi_modal:", err);
    }
  }


  // ===== Cart & Wishlist =====
  function getCart() { return getStorage(CART_KEY, []); }
  function setCart(c) { setStorage(CART_KEY, c); updateCartUI(); }
  function addToCart(name, qty = 1) {
    const item = produkVariants.find(p => p.nama === name);
    if (!item || !(Number(item.stok) > 0)) return;
    const cart = getCart();
    const ex   = cart.find(ci => ci.nama === name);
    if (ex) ex.qty += qty;
    else cart.push({ nama: item.nama, harga: item.harga, wa: item.wa || DEFAULT_WA, qty });
    setCart(cart);
  }
  function removeFromCart(name) {
    setCart(getCart().filter(ci => ci.nama !== name));
  }
  function changeQty(name, delta) {
    const cart = getCart();
    const it   = cart.find(ci => ci.nama === name);
    if (!it) return;
    it.qty = Math.max(1, (it.qty || 1) + delta);
    setCart(cart);
  }
  function clearCart() { setCart([]); }

  function updateCartUI() {
    const cart = getCart();
    const totalQty = cart.reduce((a, b) => a + (b.qty || 1), 0);
    document.getElementById("cartCount").textContent = totalQty;

    const wrap = document.getElementById("cartItems");
    if (cart.length === 0) {
      wrap.innerHTML = `
        <div class="empty-state">
          <i class="fa-regular fa-face-frown"></i>
          <p>Keranjang kosong</p>
        </div>`;
      document.getElementById("cartTotal").textContent = money(0);
      document.getElementById("btnCheckoutWA").href = "#";
      document.getElementById('navCartCount').textContent = 0;
      document.dispatchEvent(new CustomEvent('pbt:cart-updated', { detail: { count: 0, total: 0 } }));
      return;
    }
    let total = 0;
    wrap.innerHTML = cart.map(ci => {
      const sub = (ci.harga || 0) * (ci.qty || 1); total += sub;
      return `
      <div class="d-flex align-items-center justify-content-between border rounded-3 p-2 mb-2">
        <div>
          <div class="fw-bold">${ci.nama}</div>
          <div class="text-muted small">${money(ci.harga)} × ${ci.qty}</div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <button class="btn btn-sm btn-outline-secondary" data-qtyminus="${encodeURIComponent(ci.nama)}">-</button>
          <button class="btn btn-sm btn-outline-secondary" data-qtyplus="${encodeURIComponent(ci.nama)}">+</button>
          <button class="btn btn-sm btn-outline-danger" data-remove="${encodeURIComponent(ci.nama)}"><i class="fa-solid fa-trash"></i></button>
        </div>
      </div>`;
    }).join("");
    document.getElementById("cartTotal").textContent = money(total);
    const lines = cart.map(ci => `• ${ci.nama} x${ci.qty} = ${money(ci.harga * ci.qty)}`).join('\n');
    const text  = `Halo admin, saya ingin checkout:\n${lines}\n\nTotal: ${money(total)}\n\nTerima kasih.`;
    const uniqueWAs = [...new Set(cart.map(c => c.wa || DEFAULT_WA))];
    const waTarget  = uniqueWAs.length === 1 ? uniqueWAs[0] : DEFAULT_WA;
    document.getElementById("btnCheckoutWA").href =
      `https://wa.me/${encodeURIComponent(waTarget)}?text=${encodeURIComponent(text)}`;

    document.getElementById('navCartCount').textContent = totalQty;
    document.dispatchEvent(new CustomEvent('pbt:cart-updated', { detail: { count: totalQty, total } }));
  }

  function toggleWishlist(key) {
    const list = getStorage(WISH_KEY, []);
    const i = list.indexOf(key);
    if (i > -1) list.splice(i, 1);
    else list.push(key);
    setStorage(WISH_KEY, list);
  }

  // ===== Events utama =====
  searchInput.addEventListener("input", () => {
    applyFilterSort();
    renderProduk(false);
  });

  produkList.addEventListener("click", e => {
    const t = e.target.closest("[data-detail],[data-add],[data-wish]");
    if (!t) return;
    if (t.dataset.detail !== undefined) {
      showDetailByGlobalIndex(Number(t.dataset.detail));
    } else if (t.dataset.add) {
      addToCart(decodeURIComponent(t.dataset.add), 1);
    } else if (t.dataset.wish) {
      toggleWishlist(decodeURIComponent(t.dataset.wish));
      t.classList.toggle('active');
    }
  });

  document.getElementById("cartItems").addEventListener("click", e => {
    const t = e.target.closest("[data-qtyminus],[data-qtyplus],[data-remove]");
    if (!t) return;
    if (t.dataset.qtyminus)      changeQty(decodeURIComponent(t.dataset.qtyminus), -1);
    else if (t.dataset.qtyplus)  changeQty(decodeURIComponent(t.dataset.qtyplus), +1);
    else if (t.dataset.remove)   removeFromCart(decodeURIComponent(t.dataset.remove));
  });

  document.getElementById("btnClearCart").addEventListener("click", () => clearCart());
  document.getElementById("btnLoadMore").addEventListener("click", () => { page += 1; renderProduk(true); });

  document.getElementById("modalAddCart").addEventListener("click", () => {
    const primaryName = document.getElementById("modalAddCart").dataset.primaryVariant;
    if (!primaryName) return;
    addToCart(primaryName, 1);
    new bootstrap.Offcanvas('#offcanvasCart').show();
  });

  // ===== Dark mode, nav, sinkron cart =====
  (function initTheme() {
    const saved = localStorage.getItem("pbt_theme") || "light";
    document.documentElement.setAttribute("data-theme", saved);
    const darkBtn = document.getElementById("floatingDarkBtn");
    const setIcon = () => {
      darkBtn.innerHTML =
        `<i class="fa-solid ${document.documentElement.getAttribute('data-theme') === 'dark' ? 'fa-sun' : 'fa-moon'}"></i>`;
    };
    setIcon();
    darkBtn.addEventListener("click", () => {
      const mode = document.documentElement.getAttribute("data-theme") === "dark" ? "light" : "dark";
      document.documentElement.setAttribute("data-theme", mode);
      localStorage.setItem("pbt_theme", mode);
      setIcon();
      const navBtn = document.getElementById('navDarkBtn');
      if (navBtn) {
        navBtn.innerHTML = `<i class="fa-solid ${mode === 'dark' ? 'fa-sun' : 'fa-moon'}"></i>`;
      }
    });
  })();

  // ==== NAVBAR SEARCH OVERLAY (multi button + auto-scroll) ====
  (function initNavbarSearch() {
    const searchBtns      = document.querySelectorAll('[data-nav-search]');
    const searchOverlay   = document.getElementById('searchOverlay');
    const btnCloseSearch  = document.getElementById('btnCloseSearch');

    if (!searchBtns.length || !searchOverlay || !searchInput) return;

    function openSearch() {
      searchOverlay.classList.add('open');
      const produkSection = document.getElementById('listProduk');
      if (produkSection) {
        produkSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
      setTimeout(() => searchInput.focus(), 120);
    }

    function closeSearch() {
      searchOverlay.classList.remove('open');
      searchInput.blur();
    }

    function toggleSearch() {
      if (searchOverlay.classList.contains('open')) closeSearch();
      else openSearch();
    }

    searchBtns.forEach(btn => {
      btn.addEventListener('click', toggleSearch);
    });

    if (btnCloseSearch) {
      btnCloseSearch.addEventListener('click', closeSearch);
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeSearch();
    });
  })();

  // Smooth scroll nav
  document.addEventListener('click', (e) => {
    const a = e.target.closest('a[data-scroll][href^="#"]');
    if (!a) return;
    e.preventDefault();
    const sel = a.getAttribute('href');
    const el  = document.querySelector(sel);
    if (el) el.scrollIntoView({ behavior: 'smooth' });
    const coll = document.getElementById('mainNav');
    if (coll && coll.classList.contains('show')) new bootstrap.Collapse(coll).hide();
  });

  (function setActiveNav() {
    const path = location.pathname.split('/').pop() || 'index.html';
    document.querySelectorAll('.nav-link').forEach(n => {
      const href = n.getAttribute('href');
      if (n.hasAttribute('data-scroll') && (path === 'index.html' || path === '')) n.classList.add('active');
      else if (href && href.endsWith(path)) n.classList.add('active');
    });
  })();

  (function hookNavbarDark() {
    const btn = document.getElementById('navDarkBtn');
    if (!btn) return;
    const setIcon = () => {
      btn.innerHTML =
        `<i class="fa-solid ${document.documentElement.getAttribute('data-theme') === 'dark' ? 'fa-sun' : 'fa-moon'}"></i>`;
    };
    setIcon();
    btn.addEventListener('click', () => {
      const mode = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', mode);
      localStorage.setItem('pbt_theme', mode);
      setIcon();
      const floatingBtn = document.getElementById('floatingDarkBtn');
      if (floatingBtn) floatingBtn.innerHTML = btn.innerHTML;
    });
  })();

  (function syncCartCountToNav() {
    const navCount = document.getElementById('navCartCount');
    if (!navCount) return;
    document.addEventListener('pbt:cart-updated', (e) => {
      if (typeof e.detail?.count === 'number') navCount.textContent = e.detail.count;
    });
    const initCart = getStorage(CART_KEY, []);
    navCount.textContent = initCart.reduce((a, b) => a + (b.qty || 1), 0);
  })();

  // ===== INIT SAAT PAGE SIAP =====
  document.addEventListener('DOMContentLoaded', () => {
    setNavOffset();
    loadProdukFromSheet();
    updateCartUI();

    const fy = document.getElementById('footerYear');
    if (fy) fy.textContent = new Date().getFullYear();

    // Load info dari sheet informasi_modal
    loadInfoModalFromSheet();
  });

  window.addEventListener('load', () => document.body.classList.add('loaded'));
</script>



</body>
</html>
